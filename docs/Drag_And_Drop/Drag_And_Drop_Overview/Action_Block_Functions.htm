<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../..";
    gCommonRootRelPath = "../..";
    gTopicId = "9.1.0_3";
  
//]]></script>

  <script type="text/javascript" src="../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css" />
  <link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <title>Action Block Script Functions</title>
  <meta name="topic-status" content="Draft" />

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Action Block Script Functions</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Article explaining how to make action block script functions" />
  <meta name="rh-index-keywords" content="DnD™ Overview - Action Block Script Functions" />
  <meta name="search-keywords" content="DnD,Code DnD,DnD Scripts,Drag and Drop Scripts" />
</head>

<body>
  <div class="topic-header rh-topicheader-hide" id="rh-topic-header" onclick="rh._.goToFullLayout()">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="Action Block Script Functions">
        <span>Action Block Script Functions</span>
      </div>
      <div class="gotohome" title="ページをすべて表示するにはここをクリック">
        <span>ページをすべて表示するにはここをクリック</span>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>Action Block Script Functions</h1>
  <p>One of the most important assets in the <a href="../../Introduction/The_Asset_Browser.htm">Asset Browser</a> is the <a href="../../The_Asset_Editors/Scripts.htm">Script</a> asset. Scripts are special assets in that they are essentially "containers" for user defined functions and are not themselves actually called by you directly in your games. All scripts are <strong>global</strong> in scope and will be run automatically by GameMaker when your game starts, so you can use them to define global variables and functions that you want to use throughout your game.</p>
  <p>Each DnD™ script can have one or more user-defined functions added to it, and these functions are created using the action <a href="../Drag_And_Drop_Reference/Common/Declare_A_New_Function.htm">Declare A New Function</a>:</p>
  <p><img alt="Declare A New Function Syntax" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Common_Declare_Function.png" style="width: 100%; max-width: 422px;" />The functions you define here will be global in scope and act much like any built-in DnD™ action, ie: they can take different values - or none at all - called <a class="tooltip" title="An argument (also known as a parameter) is a value that is passed into a function. For example, the GameMaker Language function 'sqr(num)' is a function that will give you the square of a number that you provide as the argument, eg: 'a = sqr(4);' Here the argument is 4, and the function will return 16, which is stored in the variable 'a'.">argument</a><span class="glossextra"></span> (or parameters), and then perform a task, returning a value or returning nothing as required. You would then call the function in your games using the <a href="../Drag_And_Drop_Reference/Common/Function_Call.htm">Function Call</a> <img alt="Function Call Icon" class="icon" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/i_Execute_Function.png" style="width: 100%; max-width: 24px;" /> action, which looks like this:</p>
  <p><img alt="Function Call Syntax" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Common_Execute_Function.png" style="width: 100%; max-width: 294px;" />To create a DnD™ script, you simply use the right mouse button <img alt="RMB Icon" class="icon" src="../../assets/Images/Icons/Icon_RMB.png" style="width: 100%; max-width: 21px;" /> anywhere in the Asset Browser and select <strong>Create </strong>then <strong>Script</strong>. This will create a new DnD™ script and open the editor window:</p>
  <p><img alt="D&D Script editor" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Scripts.png" style="width: 100%; max-width: 1013px;" />You can name the script by right clicking <img alt="RMB Icon" class="icon" src="../../assets/Images/Icons/Icon_RMB.png" style="width: 100%; max-width: 21px;" /> on it in the Asset Browser and selecting <strong>Rename </strong>(or by using a slow double left click <img alt="LMB Icon" class="icon" src="../../assets/Images/Icons/Icon_LMB.png" style="width: 100%; max-width: 21px;" />), but note that the script name must conform to the general rules for assets, so they must start with a letter and only contain letters, numbers or the "_" under-bar symbol. Your script will also be pre-populated with a <strong>Declare A New Function</strong> action, ready for you to fill it out, and you can add more function declarations as required (a single script can hold multiple functions, which is useful for grouping functions with similar or connected usage together).</p>
  <p>As mentioned above, you can pass a number of arguments to a function, and it will use these to perform the task you have written it for. To understand this better, take - for example - any of the built-in actions and think about how it works... you place it in an event and supply a number of values and it will make your instance do something. User-defined functions are exactly the same, with the only difference being that <em>you </em>write them.</p>
  <p>When defining a new function, you give it a name and also define the name of any arguments it takes, if it takes any (functions can take no arguments or multiple arguments depending on what you require). If you give argument names, then these will be used in the actions that the function calls as <strong>local variables </strong>holding the function input values.</p>
  <p>It is also good practice to add in a comment for the action that explains what it does, following the <a href="../../The_Asset_Editors/Code_Editor_Properties/JSDoc_Script_Comments.htm">JS Doc rules</a>. For example, consider this function <span class="inline">set_vec()</span>:</p>
  <p><img alt="D&D Function Example With Comments" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_FunctionExample.png" style="width: 100%; max-width: 871px;" />To call the script above you would simply use the <strong>Call Function</strong> action, like this:</p>
  <p><img alt="Call A Function From A Script" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Declare_Function_2.png" style="width: 100%; max-width: 294px;" />Not only can you pass arguments into a function, but you can also ask a function to return a value too (using the <a href="../Drag_And_Drop_Reference/Common/Return.htm">Return</a> <img alt="Return Action Icon" class="icon" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/i_Return.png" style="width: 100%; max-width: 24px;" /> action), so you can use them to (for example) build calculating methods or give back an instance ID after a complex collision detection or any number of things. Please note, however, that using return <strong>ends the function</strong>, and so no actions placed after it has been used will be executed, and this means that a certain amount of thought has to go into how your functions are structured.</p>
  <p>Below is a Drag and Drop function that returns a value:</p>
  <p><img alt="D&D Script Return Example" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Script_Example_Return.png" style="width: 100%; max-width: 994px;" /></p>
  <p>The function above simply checks all the instances in a room to see what their <span class="inline">object_index</span> is and if one of them is the player object the function will return <span class="inline">true</span> (ending the function call) or <span class="inline">false</span>. You would call this function like this:</p>
  <p><img alt="Call D&D Script With Return Value" class="center" src="../../assets/Images/Scripting_Reference/Drag_And_Drop/Overview/DnD_Script_Call_Return.png" style="width: 100%; max-width: 428px;" />So, we call the function and have it create a temporary (local) variable to store the returned value (which in this case is either <span class="inline">true</span> or <span class="inline">false</span>), and then this variable is checked and an action taken.</p>
  <p>When making functions for your DnD™ scripts you can use all the same actions as you would when adding actions into an object event, and you can even call functions from within functions, and in this way create more "modular" action code. Building scripts with functions in this way can save you a lot of time creating the same action sequences and can also help make your action sequences easier to read and easier to debug.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="../../Content.htm">Index</a></div>
        <div style="float:right">Next: <a href="Changing_DnD_To_Code.htm">Changing DnD™ To Code</a></div>
      </div>
    </div>
    <h5>© Copyright YoYo Games Ltd. 2020 All Rights Reserved</h5>
  </div>
  <!-- KEYWORDS
Drag And Drop Scripts
DnD Scripts
-->
  <!-- TAGS
drag_and_drop_scripts
-->

</body></html>