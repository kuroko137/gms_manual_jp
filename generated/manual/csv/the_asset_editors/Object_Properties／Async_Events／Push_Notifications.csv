Push_Notifications.htm+html.head.title:55-3,Push Notifications,Push Notifications
Push_Notifications.htm+html.head.title:59-3,Push Notifications,Push Notifications
Push_Notifications.htm+html.body.div.div.div[title]:73-7,Push Notifications,Push Notifications
Push_Notifications.htm+html.body.div.div.div:73-7,Push Notifications,Push Notifications
Push_Notifications.htm+html.body.h1:86-3,Push Notifications,Push Notifications
Push_Notifications.htm+html.body.p.img[alt]:87-6,{IMG_TXT} Push Notification Event,{IMG_TXT} Push Notificationイベント
Push_Notifications.htm+html.body.p:87-3,"The Push Notification Event is one that is triggered by the <a class=""tooltip"" title=""TITLE_KEY::callback"">callback</a> from <a href=""../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Push_Notifications/Push_Notifications.htm""><strong>push notifications</strong></a> on the device OS, either from a local source using the function <a href=""../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Push_Notifications/push_local_notification.htm""><span class=""inline"">push_local_notification()</span></a>, or from a remote source (ie: your server). It generates a <a href=""../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm"">DS Map</a> that is exclusive to this event and is stored in the special variable <a href=""../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm""> <span class=""inline"">async_load</span> </a> (please see the individual functions that trigger asynchronous events for code examples that explain the use of this event in further detail). This DS map has the following keys:","デバイスのOS上における<a href=""../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Push_Notifications/Push_Notifications.htm""><strong>プッシュ通知</strong></a>からの<a class=""tooltip"" title=""TITLE_KEY::callback"">コールバック</a>により、<a href=""../../../GameMaker_Language/GML_Reference/Asynchronous_Functions/Push_Notifications/push_local_notification.htm""><span class=""inline"">push_local_notification()</span></a>関数を呼び出したローカルソース、またはリモートソース（自分のサーバーなど）から作動するイベントです。作動時にはイベント内だけで使える<a href=""../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm"">DSマップ</a>が生成され、<a href=""../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm""><span class=""inline"">async_load</span></a>という専用の変数に保存されます（イベントの詳しい使い方については、Asynchronousイベントを作動させる各関数のページにあるサンプルコードを参照してください）。このDSマップには以下のキーが含まれます。"
Push_Notifications.htm+html.body.ul.li:90-5,"""<span class=""inline"">type</span>"": Value can be ""local"" for a device local notification, ""remote"" for a remote notification, or ""register"" for remote notification registration.","""<span class=""inline"">type</span>"": 値が""local""であればデバイスのローカル通知、""remote""であればリモート通知、""register""であればリモート通知の登録となります。"
Push_Notifications.htm+html.body.ul.li:91-5,"""<span class=""inline"">status</span>"": Value will be ""1"" for success or ""0"" for an error.","""<span class=""inline"">status</span>"": 値が""1""であれば成功に、""0""であればエラーになります。"
Push_Notifications.htm+html.body.p:93-3,"There may be additional key entries based on the ""type"" returned and the ""status"" value. For ""status"", if an error has been returned (""0""), then you will also have the following key:","""type""と""status""の戻り値によって別のキーも追加されます。""status""の場合、エラー（""0""）が返されると以下のキーが含まれます。"
Push_Notifications.htm+html.body.ul.li:95-5,"""<span class=""inline"">error</span>"": Contains details of the error received.","""<span class=""inline"">error</span>"": 受信したエラーの詳細情報です。"
Push_Notifications.htm+html.body.p:97-3,"If the ""status"" value is 1 (ie: no errors) then the DS map will contain the following additional values, depending on the value of the ""type"" key:","""status""の値が""1""（エラーなし）の場合、""type""キーの値によって以下の値が追加されます。"
Push_Notifications.htm+html.body.ul.li:99-5,"""<span class=""inline"">reg_id</span>"": If the ""type"" received was ""register"", then this key will hold the device registration id for remote notifications.","""<span class=""inline"">reg_id</span>"": ""type""の値が""register""の場合、このキーにはリモート通知をするデバイスの登録IDが入ります。"
Push_Notifications.htm+html.body.ul.li:100-5,"""<span class=""inline"">data</span>"": If the ""type"" received was ""local"" or ""remote"", then this key will hold the string payload that you defined when you called the notification function.","""<span class=""inline"">data</span>"": ""type""の値が""local""または""remote""の場合、このキーには通知関数を呼び出すときに定義した文字列ペイロードが入ります。"
Push_Notifications.htm+html.body.p:102-3,"To understand this better, we have created a small example snippet below for you to look at. In this example we will send a local push notification using the following code:",分かりやすくなるよう、短いサンプルコードを用意しました。以下はローカルプッシュ通知を送るコードです。
Push_Notifications.htm+html.body.p:103-3,"{ANY_CODE} var fireTime = date_inc_day(date_current_datetime(), 1);<br /> var data = ""daily_reward"";<br /> push_local_notification(fireTime, ""Ahoy!"", ""Catch The Haggis Has A Present"", data);","{ANY_CODE} var fireTime = date_inc_day(date_current_datetime(), 1);<br /> var data = ""daily_reward"";<br /> push_local_notification(fireTime, ""Ahoy!"", ""Catch The Haggis Has A Present"", data);"
Push_Notifications.htm+html.body.p:104-3,"This will set a timer to ""push"" a notification to the device when one day has passed. When the day is up, if your game is either in the background or not running, a notification will be shown to the user with the given title and message (on iOS, the game name is shown and the title is ignored), and then an asynchronous Push Notification Event will be called. Note that if the game is in the foreground when the time for the notification comes, it will <em>not </em>be shown, <strong>but the asynchronous event will still trigger</strong>. In the event itself you would handle the callback something like this:",このコードではタイマーを設定し、1日後にデバイスへ通知をプッシュさせています。1日経つとゲームがバックグラウンド実行中、あるいは起動されていない場合に、指定したタイトルとメッセージの通知がユーザー側で表示され（iOSでは名前のみでタイトルは無視されます）、それからPush Notificationイベントが呼び出されます。通知が送られたときにゲームがフォアグラウンドで実行されていた場合、通知は<em></em>表示されませんが<strong>Asynchronousイベントは作動する</strong>ためご注意ください。イベント内では、以下のようにコールバックを扱うことができます。
Push_Notifications.htm+html.body.p:107-3,"{ANY_CODE} var type = ds_map_find_value(async_load, ""type"");<br /> var status = ds_map_find_value(async_load, ""status"");<br /> if status == 0<br /> {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1}//error of some kind<br /> {nbsp_x1} {nbsp_x1}var error = ds_map_find_value(async_load, ""error"");<br /> {nbsp_x1}show_debug_message(""error="" + string(error));<br /> {nbsp_x1} {nbsp_x1}}<br /> else <br /> {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1}if type == ""register""<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} global.reg_id = ds_map_find_value(async_load, ""reg_id"");<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} }<br /> {nbsp_x1} {nbsp_x1}else<br /> {nbsp_x1} {nbsp_x1} {<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} var data = ds_map_find_value(async_load, ""data"");<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}if data == ""daily_reward""<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}global.Gold += 1000;<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}}<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} }<br /> {nbsp_x1} {nbsp_x1}}","{ANY_CODE} var type = ds_map_find_value(async_load, ""type"");<br /> var status = ds_map_find_value(async_load, ""status"");<br /> if status == 0<br /> {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1}//error of some kind<br /> {nbsp_x1} {nbsp_x1}var error = ds_map_find_value(async_load, ""error"");<br /> {nbsp_x1}show_debug_message(""error="" + string(error));<br /> {nbsp_x1} {nbsp_x1}}<br /> else <br /> {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1}if type == ""register""<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} global.reg_id = ds_map_find_value(async_load, ""reg_id"");<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} }<br /> {nbsp_x1} {nbsp_x1}else<br /> {nbsp_x1} {nbsp_x1} {<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} var data = ds_map_find_value(async_load, ""data"");<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}if data == ""daily_reward""<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}global.Gold += 1000;<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1} {nbsp_x1}}<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} }<br /> {nbsp_x1} {nbsp_x1}}"
Push_Notifications.htm+html.body.div.div.div.div:115-9,"Back: <a href=""../Async_Events.htm"">Async Events</a>","戻る: <a href=""../Async_Events.htm"">Asyncイベント</a>"
Push_Notifications.htm+html.body.div.div.div.div:116-9,"Next: <a href=""Save_Load.htm"">Save / Load</a>","次へ: <a href=""Save_Load.htm"">Save / Load</a>"
Push_Notifications.htm+html.body.p:129-1,{SEARCH_RESULT} Page detailing the Push Notification async event.,{SEARCH_RESULT} Async Push Notificationイベントの詳細ページ
Push_Notifications.htm+html.body.p:129-73,{INDEX_KEYWORD} Objects - Async Push Notification Event,{INDEX_KEYWORD} オブジェクト - Async Push Notificationイベント
