Image_Loaded.htm+html.head.title:55-3,Image Loaded,Image Loaded
Image_Loaded.htm+html.head.title:59-3,Image Loaded,Image Loaded
Image_Loaded.htm+html.body.div.div.div[title]:73-7,Image Loaded,Image Loaded
Image_Loaded.htm+html.body.div.div.div:73-7,Image Loaded,Image Loaded
Image_Loaded.htm+html.body.h1:86-3,Image Loaded,Image Loaded
Image_Loaded.htm+html.body.p.img[alt]:87-6,{IMG_TXT} Image Loaded Event,{IMG_TXT} Image Loadedイベント
Image_Loaded.htm+html.body.p:87-3,"This event is triggered when you load an image into GameMaker Studio 2, as long as you have used a valid <a class=""tooltip"" title=""TITLE_KEY::URL"">URL</a> or <a href=""../../../Settings/Included_Files.htm"">included file</a> path with the applicable load file function. For example say you want to load a sprite image, and only change the current sprite for the instance to the new one when it has loaded. Well you would have something like this in a create event or an alarm event (for example):","GameMaker Studio 2に画像を読み込ませたとき、ファイル読み込み関数によって有効な<a class=""tooltip"" title=""TITLE_KEY::URL"">URL</a>または<a href=""../../../Settings/Included_Files.htm"">インクルードファイル</a>のパスが指定されている場合にのみ作動するイベントです。たとえばスプライト画像を読み込み、インスタンスの現在のスプライトをその画像のスプライトに変更するとします。まずは以下のコードを、CreateイベントかAlarmイベントに追加してみましょう。"
Image_Loaded.htm+html.body.p:89-3,"{ANY_CODE} var _url ={nbsp_x1}""http://www.angusgames.com/game/background1.png"";<br /> spr = sprite_add(_url, 0, false, false, 0, 0);","{ANY_CODE} var _url ={nbsp_x1}""http://www.angusgames.com/game/background1.png"";<br /> spr = sprite_add(_url, 0, false, false, 0, 0);"
Image_Loaded.htm+html.body.p:90-3,"This will now start to load the image into the device or the browser, but it will not block GameMaker Studio 2 while it waits for the file to be loaded. Instead GameMaker Studio 2 will keep running as normal until the image is loaded and the <a class=""tooltip"" title=""TITLE_KEY::callback"">callback</a> triggers the <strong>Image Loaded Event</strong>, where a <a href=""../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm"">DS Map</a> is created and stored in the special variable <a href=""../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm""><span class=""inline"">async_load</span></a>. The map contains the following information:","これでデバイスまたはブラウザへの画像読み込みが開始されますが、ファイルが読み込まれるまで待っている間もGameMaker Studio 2は中断されず、読み込みが終わり、その<a class=""tooltip"" title=""TITLE_KEY::callback"">コールバック</a>によって<strong>Image Loadedイベント</strong>が作動するまで通常通りに動作し続けます。イベントが作動すると<a href=""../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm"">DSマップ</a>が生成され、<a href=""../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm""><span class=""inline"">async_load</span></a>という専用変数に格納されます。このDSマップには以下の情報が含まれています。"
Image_Loaded.htm+html.body.ul.li:93-5,"""<span class=""inline"">filename</span>"": The complete path to the file you requested.","""<span class=""inline"">filename</span>"": リクエストしたファイルの完全パスです。"
Image_Loaded.htm+html.body.ul.li:94-5,"""<span class=""inline"">id</span>"": The ID of the resource that you have loaded. This will be the same as the variable that you have assigned the resource to.","""<span class=""inline"">id</span>"": 読み込まれたリソースのIDであり、リソースに割り当てた変数と同一です。"
Image_Loaded.htm+html.body.ul.li:95-5,"""<span class=""inline"">status</span>"": Returns a value of less than 0 for an error.","""<span class=""inline"">status</span>"": 返された値が0より小さければエラーとなります。"
Image_Loaded.htm+html.body.p:97-3,You would then assign the newly loaded image to a sprite in this event. The following code example demonstrates how the returned information would be used:,あとは読み込まれた画像をImage Loadedイベントからスプライトに割り当てましょう。こちらのサンプルコードを見れば、返された情報をどのように利用すればいいのか分かります。
Image_Loaded.htm+html.body.p:98-3,"{ANY_CODE} if ds_map_find_value(async_load, ""id"") == spr<br /> {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1}if ds_map_find_value(async_load, ""status"") &gt;= 0<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} sprite_index = spr<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} }<br /> {nbsp_x1} {nbsp_x1}}","{ANY_CODE} if ds_map_find_value(async_load, ""id"") == spr<br /> {nbsp_x1} {nbsp_x1}{<br /> {nbsp_x1} {nbsp_x1}if ds_map_find_value(async_load, ""status"") &gt;= 0<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} {<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} sprite_index = spr<br /> {nbsp_x1} {nbsp_x1} {nbsp_x1} }<br /> {nbsp_x1} {nbsp_x1}}"
Image_Loaded.htm+html.body.p:99-3,"The above code will first check the <span class=""inline"">id</span> of the DS map that has been created, then check the <span class=""inline"">status</span> of the callback. If the value is greater than or equal to 0 (signalling success) the result from the callback will then be used to set the sprite index to the newly loaded image.","上記のコードでは、まず生成されたDSマップの<span class=""inline"">ID</span>をチェックし、それからコールバックの<span class=""inline"">ステータス</span>を確認しています。そして値が0以上（成功通知）であればコールバックの結果を、新しく読み込まれた画像のスプライトインデックスとして設定します。"
Image_Loaded.htm+html.body.div.div.div.div:107-9,"Back: <a href=""../Async_Events.htm"">Async Events</a>","戻る: <a href=""../Async_Events.htm"">Asyncイベント</a>"
Image_Loaded.htm+html.body.div.div.div.div:108-9,"Next: <a href=""Networking.htm"">Networking</a>","次へ: <a href=""Networking.htm"">Networking</a>"
Image_Loaded.htm+html.body.p:121-1,{SEARCH_RESULT} Page detailing the Image Loaded async event.,{SEARCH_RESULT} Async Image Loadedイベントの詳細ページ
Image_Loaded.htm+html.body.p:121-68,{INDEX_KEYWORD} Objects - Async Image Loaded Event,{INDEX_KEYWORD} オブジェクト - Async Image Loadedイベント
