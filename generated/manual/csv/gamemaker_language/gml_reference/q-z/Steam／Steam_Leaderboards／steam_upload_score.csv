steam_upload_score.htm+html.head.title:55-3,steam_upload_score
steam_upload_score.htm+html.head.title:59-3,steam_upload_score
steam_upload_score.htm+html.body.div.div.div[title]:73-7,steam_upload_score
steam_upload_score.htm+html.body.div.div.div:73-7,steam_upload_score
steam_upload_score.htm+html.body.h1:86-3,steam_upload_score
steam_upload_score.htm+html.body.p:87-3,"This function will send a score to the given leaderboard. The score to be uploaded is a real number, and the leaderboard name is a string that was defined when you created the leaderboard using the function <a href=""steam_create_leaderboard.htm""><tt>steam_create_leaderboard()</tt></a>. If the function fails, it will return a value of -1, while a successful post will return a unique ID for the upload and trigger an asynchronous <a href=""../../../../The_Asset_Editors/Object_Properties/Async_Events/Steam.htm"">Steam Event</a>. This event will create a <tt>DS Map</tt> in the built in variable <a href=""../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm""><tt>async_load</tt></a> with the following key/value pairs:"
steam_upload_score.htm+html.body.ul.li:91-5,"""<b>event_type</b>"" - This key will hold the value ""<b>leaderboard_upload</b>"" when triggered by this function"
steam_upload_score.htm+html.body.ul.li:92-5,"""<b>lb_name</b>"" - This key holds the name of the leaderboard which was posted to"
steam_upload_score.htm+html.body.ul.li:93-5,"""<b>success</b>"" - Will be 1 if the post succeeded, 0 failed"
steam_upload_score.htm+html.body.ul.li:94-5,"""<b>updated</b>"" - Will be 1 if the leaderboard score was actually updated (ie: the new score was better) or 0 otherwise"
steam_upload_score.htm+html.body.ul.li:95-5,"""<b>post_id</b>"" - This key should match the ID value returned by the upload call"
steam_upload_score.htm+html.body.ul.li:96-5,"""<b>score</b>"" - This key holds the score which was posted"
steam_upload_score.htm+html.body.h4:99-3,Syntax:
steam_upload_score.htm+html.body.p:100-3,"steam_upload_score(lb_name, score);"
steam_upload_score.htm+html.body.table.tbody.tr.th:104-9,Argument
steam_upload_score.htm+html.body.table.tbody.tr.th:105-9,Description
steam_upload_score.htm+html.body.table.tbody.tr.td:108-9,lb_name
steam_upload_score.htm+html.body.table.tbody.tr.td:109-9,The name of the leaderboard that you are uploading the scores to (a string).
steam_upload_score.htm+html.body.table.tbody.tr.td:112-9,score
steam_upload_score.htm+html.body.table.tbody.tr.td:113-9,The score to upload (a real number).
steam_upload_score.htm+html.body.h4:118-3,Returns:
steam_upload_score.htm+html.body.p:119-3,Real
steam_upload_score.htm+html.body.h4:121-3,Extended Example:
steam_upload_score.htm+html.body.p:122-3,"In this example, we first upload a score and then parse the <tt>async_load</tt> map returned if successful. The code below shows a typical example for uploading:"
steam_upload_score.htm+html.body.p:123-3,"{ANY_CODE} if (hp &lt;= 0)<br /> {nbsp_x4}{ <br /> {nbsp_x4}upload_ID = steam_upload_score(""Game Scores"", score);<br /> {nbsp_x4}if (!upload_ID)<br /> {nbsp_x8}{ <br /> {nbsp_x8}alarm[0] = room_speed;<br /> {nbsp_x8}} <br /> {nbsp_x4}}"
steam_upload_score.htm+html.body.p:128-3,"Note that we have set an alarm if the call fails. This would be used to try the upload again at a later time and you can add extra code there to retry the upload or to save the score to a text file should it continue to fail, etc... We now add the following into the <b>Steam async event</b> for the instance controlling the scores:"
steam_upload_score.htm+html.body.p:130-3,"{ANY_CODE} var type = ds_map_find_value(async_load, ""event_type"");<br /> if (type == ""leaderboard_upload"")<br /> {nbsp_x4}{ <br /> {nbsp_x4}var lb_ID = ds_map_find_value(async_load, ""post_id"");<br /> {nbsp_x4}if lb_ID == upload_ID<br /> {nbsp_x8}{ <br /> {nbsp_x8}var lb_name = ds_map_find_value(async_load, ""lb_name"");<br /> {nbsp_x8}var lb_done = ds_map_find_value(async_load, ""success"");<br /> {nbsp_x8}var lb_score = ds_map_find_value(async_load, ""score"");<br /> {nbsp_x8}var lb_updated = ds_map_find_value(async_load, ""updated"");<br /> {nbsp_x8}show_debug_message(""leaderboard post id:"" + string(lb_ID) + "" to lb:"" + string(lb_name) + "" with score:"" + string(lb_score) + "" updated="" + string(lb_updated));<br /> {nbsp_x8}if (lb_done)<br /> {nbsp_x12}{ <br /> {nbsp_x12}show_debug_message(""- Succeeded"");<br /> {nbsp_x12}} <br /> {nbsp_x8}else <br /> {nbsp_x12}{ <br /> {nbsp_x12}show_debug_message(""- Failed"");<br /> {nbsp_x12}} <br /> {nbsp_x8}} <br /> {nbsp_x4}}"
steam_upload_score.htm+html.body.p:142-3,"in the example we are simply outputting the return values to the compiler window as debug messages, but you can use this event to deal with the information in any way you choose."
steam_upload_score.htm+html.body.div.div.div.div:149-9,"Back: <a href=""Steam_Leaderboards.htm"">Leaderboards</a>"
steam_upload_score.htm+html.body.div.div.div.div:150-9,"Next: <a href=""steam_upload_score_buffer.htm"">steam_upload_score_buffer</a>"
steam_upload_score.htm+html.body.p:162-1,{SEARCH_RESULT} Reference page for steam_upload_score
